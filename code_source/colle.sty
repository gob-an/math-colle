% packages
\usepackage[margin=2.5cm]{geometry}
\usepackage[french]{babel}
\usepackage{amsmath,amssymb}
\usepackage{mathtools}
\usepackage{xcolor}
\usepackage{mdframed}
\usepackage{mathrsfs}
\usepackage{amsfonts}
\usepackage{dsfont}
\usepackage[shortlabels]{enumitem}
\usepackage{comment}
\usepackage{xparse}
\usepackage{xfrac}
\usepackage[most]{tcolorbox}
\usepackage{tabularx}
\usepackage[normalem]{ulem}


% environnements
\definecolor{corrigecolor}{gray}{0.7}

\newmdenv[
linecolor=corrigecolor,
linewidth=2pt,
leftline=true,
rightline=false,
topline=false,
bottomline=false,
skipabove=6pt,
skipbelow=6pt,
innertopmargin=4pt,
innerbottommargin=4pt,
innerleftmargin=6pt,
innerrightmargin=4pt,
backgroundcolor=gray!5,
leftmargin=\dimexpr-\@totalleftmargin\relax
rightmargin=0pt,
innerleftmargin=6pt,
innerrightmargin=4pt,
needspace=1em,
]{correctionbox}

\newenvironment{corr}
{\begin{correctionbox}
\setlength{\parindent}{\baselineskip}% alinéa normal
\hspace{0pt}
\vspace{-\baselineskip/2}

	}
	{
		
	\end{correctionbox}}



\NewDocumentEnvironment{pr}{o}
{
	\IfValueTF{#1}
	{
		% ----- AVEC titre -----
		\begin{tcolorbox}[
			enhanced,
			colframe=blue,
			colback=white,
			coltitle=blue,
			colbacktitle=white,
			boxrule=0.8pt,
			sharp corners,
			title=\bfseries #1,
			attach boxed title to top left={
				yshift=-\tcboxedtitleheight/2,
				xshift=3em
			},
			boxed title style={
				size=small,
				colframe=white,
				boxrule=0pt,
				colback=white
			}
			]
		}
		{
			% ----- SANS titre -----
			\begin{tcolorbox}[
				enhanced,
				colframe=blue,
				colback=white,
				boxrule=0.8pt,
				sharp corners
				]
			}
		}
		{
		\end{tcolorbox}
	}


\NewDocumentEnvironment{df}{o}
{
	\IfValueTF{#1}
	{
		% ----- AVEC titre -----
		\begin{tcolorbox}[
			enhanced,
			colframe=teal,
			colback=white,
			coltitle=teal,
			colbacktitle=white,
			boxrule=0.8pt,
			sharp corners,
			title=\bfseries #1,
			attach boxed title to top left={
				yshift=-\tcboxedtitleheight/2,
				xshift=3em
			},
			boxed title style={
				size=small,
				colframe=white,
				boxrule=0pt,
				colback=white
			}
			]
		}
		{
			% ----- SANS titre -----
			\begin{tcolorbox}[
				enhanced,
				colframe=teal,
				colback=white,
				boxrule=0.8pt,
				sharp corners
				]
			}
		}
		{
		\end{tcolorbox}
	}





% ensembles usuels
\renewcommand{\P}{\mathds P}
\newcommand{\N}{\mathds N}
\newcommand{\Z}{\mathds Z}
\newcommand{\Q}{\mathds Q}
\newcommand{\R}{\mathds R}
\newcommand{\C}{\mathds C}
\newcommand{\F}[1]{\mathds F_{#1}}
\newcommand{\K}{\mathds K}


\newcommand{\esp}{\mathds E} % espérance
\newcommand{\eps}{\varepsilon} % epsilon
\newcommand{\vphi}{\varphi} % phi
\newcommand{\perm}{\mathfrak{S}} % groupe symétrique
\newcommand{\id}{\mathrm{id}} % identité
\newcommand{\ind}{\perp\!\!\!\perp} % indépendance

\makeatletter
\NewDocumentCommand{\Vect}{o} { % espace vectoriel engendré
	\mathrm{Vect}
	\IfValueT{#1}{_{#1}}
	\@ifnextchar({}{\,}
}
\makeatother
\DeclareMathOperator{\rg}{rg}
\DeclareMathOperator{\Sp}{Sp}
\DeclareMathOperator{\Diag}{Diag}

\newcommand{\scal}[2]{\left\langle #1, #2\right\rangle} % produit scalaire


% partie imaginaire
\makeatletter
\renewcommand{\Im}{
	{%
		\futurelet\@let@token\@Im
	}%
}
\newcommand{\@Im}{
	\ifx\@let@token(
	\operatorname{\mathrm{Im}}
	\else
	\operatorname{\mathrm{Im}}\,
	\fi
}
\makeatother

% partie réelle
\makeatletter
\renewcommand{\Re}{
	\mathop{
		\futurelet\@let@token\@Re
	}
}
\newcommand{\@Re}{
	\ifx\@let@token(
	\operatorname{\mathrm{Re}}
	\else
	\operatorname{\mathrm{Re}}\,
	\fi
}
\makeatother


% classe C^k
\NewDocumentCommand{\Co}{o g g}{
	\mathcal C%
	\IfValueT{#1}{^{#1}}%
	\IfValueT{#2}{\left(#2,\,#3\right)}
}


% arctangente
\DeclareMathOperator{\atan}{Arctan}
\DeclareMathOperator{\acos}{Arccos}
\DeclareMathOperator{\asin}{Arcsin}


\DeclareMathOperator{\tr}{tr}

% limite
\NewDocumentCommand{\cv}{ o o }{
	\ensuremath{
		\IfNoValueTF{#1}{
			\IfNoValueTF{#2}{\rightarrow}{\xrightarrow[#2]{}}
		}{
			\IfNoValueTF{#2}{\xrightarrow[#1]{} }{ \xrightarrow[#2]{#1} }
		}
	}
}




\newcolumntype{C}{>{$\displaystyle}c<{$}}


\newcommand{\Rq}{\textbf{Remarque}: }
\newcommand{\rappel}{\textbf{Rappel}: }
\newcommand{\cor}{\textbf{Corollaire}: }
\newcommand{\note}{\textit{Note}: }
\newcommand{\elem}{\textit{Éléments de démonstration}: }

\newcommand{\congr}[2]{\equiv #1 \, [#2]}

\newcommand{\colle}[3]{
	\title{Corrigé colle S#1 \\ MPI/MPI* du lycée Faidherbe \\ \large{Exercices #2}}
	\author{Léane Parent}
}