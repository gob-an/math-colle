% packages
\usepackage[margin=2.5cm]{geometry}
\usepackage[french]{babel}
\usepackage{amsmath,amssymb}
\usepackage{mathtools}
\usepackage{xcolor}
\usepackage{mdframed}
\usepackage{mathrsfs}
\usepackage{amsfonts}
\usepackage{dsfont}
\usepackage[shortlabels]{enumitem}
\usepackage{comment}
\usepackage{xparse}


% environnements
\definecolor{corrigecolor}{gray}{0.7}

\newmdenv[
linecolor=corrigecolor,
linewidth=2pt,
leftline=true,
rightline=false,
topline=false,
bottomline=false,
skipabove=6pt,
skipbelow=6pt,
innertopmargin=4pt,
innerbottommargin=4pt,
innerleftmargin=6pt,
innerrightmargin=4pt,
backgroundcolor=gray!5,
leftmargin=\dimexpr-\@totalleftmargin\relax
rightmargin=0pt,
innerleftmargin=6pt,
innerrightmargin=4pt,
needspace=1em
]{correctionbox} \newmdenv[  , rightmargin=0pt firstextra={\hspace{\parindent}} ]{correctionbox}

\newenvironment{corr}
{\begin{correctionbox}\setlength{\parindent}{\baselineskip}
	\hfill
	
	} % ou \parindent=15pt selon vos préférences
	{\end{correctionbox}}


% ensembles usuels
\newcommand{\pr}{\mathds P}
\newcommand{\N}{\mathds N}
\newcommand{\Z}{\mathds Z}
\newcommand{\Q}{\mathds Q}
\newcommand{\R}{\mathds R}
\newcommand{\C}{\mathds C}
\newcommand{\F}{\mathds F}


\newcommand{\esp}{\mathds E} % espérance
\newcommand{\eps}{\varepsilon} % epsilon
\newcommand{\perm}{\mathfrak{S}} % groupe symétrique
\newcommand{\id}{\mathrm{id}} % identité
\newcommand{\ind}{\perp\!\!\!\perp} % indépendance

\makeatletter
\NewDocumentCommand{\Vect}{o} { % espace vectoriel engendré
	\mathrm{Vect}
	\IfValueT{#1}{_{#1}}
	\@ifnextchar({}{\,}
}
\makeatother

\newcommand{\scal}[2]{\left\langle #1, #2\right\rangle} % produit scalaire


% partie imaginaire
\makeatletter
\renewcommand{\Im}{
	\mathop{%
		\futurelet\@let@token\@Im
	}%
}
\newcommand{\@Im}{
	\ifx\@let@token(
	\operatorname{\mathrm{Im}}
	\else
	\operatorname{\mathrm{Im}}\,
	\fi
}
\makeatother

% partie réelle
\makeatletter
\renewcommand{\Re}{
	\mathop{
		\futurelet\@let@token\@Re
	}
}
\newcommand{\@Re}{
	\ifx\@let@token(
	\operatorname{\mathrm{Re}}
	\else
	\operatorname{\mathrm{Re}}\,
	\fi
}
\makeatother


% classe C^k
\NewDocumentCommand{\Co}{o g g}{
	\mathcal C%
	\IfValueT{#1}{^{#1}}%
	\IfValueT{#2}{\left(#2,\,#3\right)}
}


% arctangente
\makeatletter
\newcommand{\atan}{
	\mathop{
		\futurelet\@let@token\@atan
	}
}
\newcommand{\@atan}{
	\ifx\@let@token(
	\operatorname{Arctan}
	\else
	\operatorname{Arctan}\,
	\fi
}
\makeatother


% limite
\NewDocumentCommand{\cv}{ o o }{
	\ensuremath{
		\IfNoValueTF{#1}{
			\IfNoValueTF{#2}{\rightarrow}{\xrightarrow[#2]{}}
		}{
			\IfNoValueTF{#2}{\xrightarrow[#1]{} }{ \xrightarrow[#2]{#1} }
		}
	}
}